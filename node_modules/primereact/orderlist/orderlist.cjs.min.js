"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/api"),n=require("primereact/componentbase"),r=require("primereact/hooks"),o=require("primereact/utils"),i=require("primereact/button"),l=require("primereact/icons/angledoubledown"),a=require("primereact/icons/angledoubleup"),c=require("primereact/icons/angledown"),u=require("primereact/icons/angleup"),s=require("primereact/icons/search"),d=require("primereact/ripple");function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function f(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var m=f(e),v=p(t);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e){if(Array.isArray(e))return g(e)}function y(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function I(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function D(e){return b(e)||y(e)||h(e)||I()}function O(e){if(Array.isArray(e))return e}function E(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return a}}function w(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e,t){return O(e)||E(e,t)||h(e,t)||w()}var S=n.ComponentBase.extend({defaultProps:{__TYPE:"OrderList",id:null,ariaLabel:null,ariaLabelledBy:null,value:null,header:null,style:null,className:null,listStyle:null,dragdrop:!1,tabIndex:0,filterIcon:null,moveUpIcon:null,moveTopIcon:null,moveDownIcon:null,moveBottomIcon:null,dataKey:null,breakpoint:"960px",onChange:null,itemTemplate:null,filter:!1,filterBy:null,filterMatchMode:"contains",filterLocale:void 0,filterPlaceholder:null,filterTemplate:null,onFilter:null,children:void 0},css:{classes:{root:"p-orderlist p-component",controls:"p-orderlist-controls",droppoint:"p-orderlist-droppoint",header:"p-orderlist-header",list:"p-orderlist-list",icon:"p-orderlist-filter",filter:"p-orderlist-filter",filterInput:"p-orderlist-filter-input p-inputtext p-component",filterIcon:"p-orderlist-filter-icon",filterContainer:"p-orderlist-filter-container",container:"p-orderlist-list-container",item:function(e){return o.classNames("p-orderlist-item",{"p-highlight":e.selected,"p-focus":e.focused})}},styles:"\n@layer primereact {\n    .p-orderlist {\n        display: flex;\n    }\n\n    .p-orderlist-controls {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n    }\n\n    .p-orderlist-list-container {\n        flex: 1 1 auto;\n    }\n\n    .p-orderlist-list {\n        list-style-type: none;\n        margin: 0;\n        padding: 0;\n        overflow: auto;\n        min-height: 12rem;\n        max-height: 24rem;\n    }\n\n    .p-orderlist-item {\n        cursor: pointer;\n        overflow: hidden;\n        position: relative;\n    }\n\n    .p-orderlist-filter {\n        position: relative;\n    }\n\n    .p-orderlist-filter-icon {\n        position: absolute;\n        top: 50%;\n        margin-top: -.5rem;\n    }\n\n    .p-orderlist-filter-input {\n        width: 100%;\n    }\n\n    .p-orderlist.p-state-disabled .p-orderlist-item,\n    .p-orderlist.p-state-disabled .p-button {\n        cursor: default;\n    }\n\n    .p-orderlist.p-state-disabled .p-orderlist-list {\n        overflow: hidden;\n    }\n\n    .p-orderlist .p-orderlist-droppoint {\n        height: 0.5rem;\n    }\n\n    .p-orderlist .p-orderlist-droppoint.p-orderlist-droppoint-highlight {\n        background: var(--primary-color);\n    }\n}\n"}});function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}var L=m.memo((function(e){var n=r.useMergeProps(),s=e.moveUpIcon||m.createElement(u.AngleUpIcon,null),d=e.moveTopIcon||m.createElement(a.AngleDoubleUpIcon,null),p=e.moveDownIcon||m.createElement(c.AngleDownIcon,null),f=e.moveBottomIcon||m.createElement(l.AngleDoubleDownIcon,null),v=e.ptm,g=e.cx,b=e.unstyled,y=o.ObjectUtils.isEmpty(e.value)||o.ObjectUtils.isEmpty(e.selection),h=n({className:g("controls")},v("controls",{hostName:e.hostName})),I=n({type:"button",unstyled:b,icon:s,onClick:function(t){if(e.selection){for(var n=D(e.value),r=0;r<e.selection.length;r++){var i=o.ObjectUtils.findIndexInList(e.selection[r],n,e.dataKey);if(0===i)break;var l=n[i-1];n[i-1]=n[i],n[i]=l}e.onReorder&&e.onReorder({originalEvent:t,value:n,direction:"up"})}},disabled:y,"aria-label":t.ariaLabel("moveUp"),__parentMetadata:{parent:e.metaData}},v("moveUpButton")),O=n({type:"button",unstyled:b,icon:d,onClick:function(t){if(e.selection){for(var n=D(e.value),r=e.selection.length-1;r>=0;r--){var i=o.ObjectUtils.findIndexInList(e.selection[r],n,e.dataKey);if(0===i)break;var l=n.splice(i,1)[0];n.unshift(l)}e.onReorder&&e.onReorder({originalEvent:t,value:n,direction:"top"})}},disabled:y,"aria-label":t.ariaLabel("moveTop"),__parentMetadata:{parent:e.metaData}},v("moveTopButton")),E=n({type:"button",unstyled:b,icon:p,onClick:function(t){if(e.selection){for(var n=D(e.value),r=e.selection.length-1;r>=0;r--){var i=o.ObjectUtils.findIndexInList(e.selection[r],n,e.dataKey);if(i===n.length-1)break;var l=n[i+1];n[i+1]=n[i],n[i]=l}e.onReorder&&e.onReorder({originalEvent:t,value:n,direction:"down"})}},disabled:y,"aria-label":t.ariaLabel("moveDown"),__parentMetadata:{parent:e.metaData}},v("moveDownButton")),w=n({type:"button",unstyled:b,icon:f,onClick:function(t){if(e.selection){for(var n=D(e.value),r=0;r<e.selection.length;r++){var i=o.ObjectUtils.findIndexInList(e.selection[r],n,e.dataKey);if(i===n.length-1)break;var l=n.splice(i,1)[0];n.push(l)}e.onReorder&&e.onReorder({originalEvent:t,value:n,direction:"bottom"})}},disabled:y,"aria-label":t.ariaLabel("moveBottom"),__parentMetadata:{parent:e.metaData}},v("moveBottomButton"));return m.createElement("div",h,m.createElement(i.Button,j({pt:v("moveUpButton")},I)),m.createElement(i.Button,j({pt:v("moveTopButton")},O)),m.createElement(i.Button,j({pt:v("moveDownButton")},E)),m.createElement(i.Button,j({pt:v("moveBottomButton")},w)))}));function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function N(e,t){if("object"!==C(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function U(e){var t=N(e,"string");return"symbol"===C(t)?t:String(t)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){var r,o,i;r=e,i=n[t],(o=U(o=t))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}L.displayName="OrderListControls";var H=m.memo(m.forwardRef((function(e,t){var n=r.useMergeProps(),i=e.ptm,l=e.cx,a=function(t,n){return i(t,k({hostName:e.hostName},n))},c=function(e,t){return a(t,{context:{selected:b(e)}})},u=m.useRef(null),p=m.useRef(null),f=m.useRef(null),v=m.useRef(null),g={filter:function(t){return e.onFilterInputChange(t)},reset:function(){return e.resetFilter()}},b=function(t){return-1!==o.ObjectUtils.findIndexInList(t,e.selection,e.dataKey)},y=function(t,n){p.current!==n&&p.current+1!==n&&(f.current=n,!e.isUnstyled()&&o.DomHandler.addClass(t.target,"p-orderlist-droppoint-highlight"),t.target.setAttribute("data-p-orderlist-droppoint-highlight",!0),t.preventDefault())},h=function(t){f.current=null,!e.isUnstyled()&&o.DomHandler.removeClass(t.target,"p-orderlist-droppoint-highlight"),t.target.setAttribute("data-p-orderlist-droppoint-highlight",!1)},I=function(t){var n=p.current>f.current?f.current:0===f.current?0:f.current-1,r=D(e.value);o.ObjectUtils.reorderArray(r,p.current,n),f.current=null,!e.isUnstyled()&&o.DomHandler.removeClass(t.target,"p-orderlist-droppoint-highlight"),t.target.setAttribute("data-p-orderlist-droppoint-highlight",!1),e.onChange&&e.onChange({originalEvent:t,value:r})},O=function(e){u.current=!1},E=function(e){if(u.current){var t=v.current.getBoundingClientRect().top+o.DomHandler.getWindowScrollTop(),n=t+v.current.clientHeight-e.pageY,r=e.pageY-t;n<25&&n>0?v.current.scrollTop+=15:r<25&&r>0&&(v.current.scrollTop-=15)}},w=function(e){13===e.which&&e.preventDefault()},x=function(e,t){var r=n({className:l("droppoint"),onDragOver:function(t){return y(t,e+1)},onDragLeave:h,onDrop:I},a("droppoint"));return m.createElement("li",j({key:t},r))};m.useImperativeHandle(t,(function(){return{getElement:function(){return v.current}}}));var S,L,C,N=(S=n({className:l("header")},a("header")),e.header?m.createElement("div",S,e.header):null),U=function(){var t=n({className:l("icon")},a("icon")),r=o.IconUtils.getJSXIcon(e.filterIcon||m.createElement(s.SearchIcon,t),k({},t),{props:e});if(e.filter){var i=n({className:l("filter")},a("filter")),c=n({type:"text",value:e.filterValue,onChange:e.onFilter,onKeyDown:w,placeholder:e.placeholder,className:l("filterInput")},a("filterInput")),u=n({className:l("filterIcon")},a("filterIcon")),d=m.createElement("div",i,m.createElement("input",c),m.createElement("span",u,r));if(e.filterTemplate)d=o.ObjectUtils.getJSXElement(e.filterTemplate,{className:"p-orderlist-filter",inputProps:{inputClassName:"p-orderlist-filter-input p-inputtext p-component",onChange:e.onFilter,onKeyDown:w},filterOptions:g,iconClassName:"p-orderlist-filter-icon",element:d,props:e});var p=n({className:l("filterContainer")},a("filterContainer"));return m.createElement("div",p,d)}return null}(),B=(L=e.value?e.value.map((function(t,r){var i=e.itemTemplate?e.itemTemplate(t):t,a=e.parentId+"_"+r,s=e.focused&&e.focusedOptionId===a,f=b(t);if(e.dragdrop){var v=n({id:a,role:"option",draggable:"true",onClick:function(n){return e.onItemClick({originalEvent:n,value:t,index:r})},onMouseDown:e.onOptionMouseDown,onDragStart:function(e){return t=r,e.dataTransfer.setData("text","orderlist"),u.current=!0,void(p.current=t);var t},onDragEnd:O,className:o.classNames(e.className,l("item",{selected:f,focused:s})),"aria-selected":f,"data-p-highlight":f,"data-p-focused":s},c(t,"item")),g=[];return 0===r&&g.push(x(t,r)),g.push(m.createElement("li",j({key:a},v),i)),g.push(x(r,a+"_droppoint")),g}var y=n({id:a,role:"option",onClick:function(n){return e.onItemClick({originalEvent:n,value:t,index:r})},onMouseDown:e.onOptionMouseDown,className:o.classNames(e.className,l("item",{selected:f,focused:s})),"aria-selected":f,"data-p-highlight":f,"data-p-focused":s},c(t,"item"));return m.createElement("li",j({key:a},y),i,m.createElement(d.Ripple,null))})):null,C=n({ref:v,className:l("list"),style:e.listStyle,onDragOver:E,role:"listbox",onFocus:e.onListFocus,onBlur:e.onListBlur,onKeyDown:e.onListKeyDown,tabIndex:e.tabIndex,"aria-activedescendant":e.focused?e.focusedOptionId:null,"aria-label":e.ariaLabel,"aria-labelledby":e.ariaLabelledBy,"aria-multiselectable":!0},a("list")),m.createElement("ul",C,L)),H=n({className:l("container")},a("container"));return m.createElement("div",H,N,U,B)})));H.displayName="OrderListSubList";var K=m.memo(m.forwardRef((function(e,i){var l=r.useMergeProps(),a=m.useContext(t.PrimeReactContext),c=S.getProps(e,a),u=x(m.useState([]),2),s=u[0],d=u[1],p=x(m.useState(""),2),f=p[0],g=p[1],b=x(m.useState(null),2),y=b[0],h=b[1],I=x(m.useState(!1),2),O=I[0],E=I[1],w=x(m.useState(null),2),j=w[0],C=w[1],N=x(m.useState(-1),2),U=N[0],B=N[1],k=o.ObjectUtils.isNotEmpty(f),K=m.useRef(null),T=m.useRef(null),P=m.useRef(null),M=m.useRef(null),A={props:c,state:{selection:s,filterValue:f,attributeSelector:y}},R=S.setMetaData(A),F=R.ptm,_=R.cx,q=R.isUnstyled;n.useHandleStyle(S.css.styles,q,{name:"orderlist"});var V=function(){if(k){var e=f.trim().toLocaleLowerCase(c.filterLocale),n=c.filterBy?c.filterBy.split(","):[];return t.FilterService.filter(c.value,n,e,c.filterMatchMode,c.filterLocale)}return c.value}(),Y=function(){return M.current&&M.current.getElement()},J=function(e){var t=e.originalEvent,n=e.value,r=e.index,i=o.ObjectUtils.findIndexInList(n,s),l=Y(),a=o.DomHandler.find(l,'[data-pc-section="item"]')[r].getAttribute("id");B(a);var c,u=t.metaKey||t.ctrlKey;c=-1!==i?u?s.filter((function(e,t){return t!==i})):[n]:u?[].concat(D(s),[n]):[n],d(c)},X=function(e){var t=V[e],n=-1!==o.ObjectUtils.findIndexInList(t,s);d(n?s.filter((function(e){return e!==t})):[].concat(D(s),[t]))},z=function(e){var t=ee(U);ne(t),e.shiftKey&&X(t),e.preventDefault()},W=function(e){var t=te(U);ne(t),e.shiftKey&&X(t),e.preventDefault()},$=function(e){if(e.ctrlKey&&e.shiftKey){var t=Y(),n=o.DomHandler.find(t,'[data-pc-section="item"]'),r=o.DomHandler.findSingle(t,'[data-pc-section="item"][id='.concat(U,"]")),i=D(n).findIndex((function(e){return e===r}));d(D(V).slice(0,i+1))}else ne(0);e.preventDefault()},G=function(e){var t=Y();if(e.ctrlKey&&e.shiftKey){var n=o.DomHandler.find(t,'[data-pc-section="item"]'),r=o.DomHandler.findSingle(t,'[data-pc-section="item"][id='.concat(U,"]")),i=D(n).findIndex((function(e){return e===r}));d(D(V).slice(i,n.length))}else ne(o.DomHandler.find(t,'[data-pc-section="item"]').length-1);e.preventDefault()},Q=function(e){var t=Y(),n=o.DomHandler.find(t,'[data-pc-section="item"]'),r=o.DomHandler.findSingle(t,'[data-pc-section="item"][id='.concat(U,"]")),i=D(n).findIndex((function(e){return e===r}));J({originalEvent:e,value:V[i],index:i}),e.preventDefault()},Z=function(e){e.preventDefault();var t=Y();if(e.shiftKey&&s&&s.length>0){var n=o.DomHandler.find(t,'[data-pc-section="item"]'),r=o.ObjectUtils.findIndexInList(s[0],D(V)),i=o.DomHandler.findSingle(t,'[data-pc-section="item"][id='.concat(U,"]")),l=D(n).findIndex((function(e){return e===i}));d(D(V).slice(Math.min(r,l),Math.max(r,l)+1))}else Q(e)},ee=function(e){var t=Y(),n=D(o.DomHandler.find(t,'[data-pc-section="item"]')).findIndex((function(t){return t.id===e}));return n>-1?n+1:0},te=function(e){var t=Y(),n=D(o.DomHandler.find(t,'[data-pc-section="item"]')).findIndex((function(t){return t.id===e}));return n>-1?n-1:0},ne=function(e){var t=Y(),n=o.DomHandler.find(t,'[data-pc-section="item"]'),r=e>=n.length?n.length-1:e<0?0:e,i=n[r]?n[r].getAttribute("id"):-1;B(i),re(i)},re=function(e){var t=Y(),n=o.DomHandler.findSingle(t,'[data-pc-section="item"][id="'.concat(e,'"]'));n&&n.scrollIntoView&&n.scrollIntoView({block:"nearest",inline:"start"})},oe=function(){if(!T.current){T.current=o.DomHandler.createInlineStyle(a&&a.nonce||v.default.nonce,a&&a.styleContainer);var e="\n@media screen and (max-width: ".concat(c.breakpoint,") {\n    .p-orderlist[").concat(y,"] {\n        flex-direction: column;\n    }\n\n    .p-orderlist[").concat(y,"] .p-orderlist-controls {\n        padding: var(--content-padding);\n        flex-direction: row;\n    }\n\n    .p-orderlist[").concat(y,"] .p-orderlist-controls .p-button {\n        margin-right: var(--inline-spacing);\n        margin-bottom: 0;\n    }\n\n    .p-orderlist[").concat(y,"] .p-orderlist-controls .p-button:last-child {\n        margin-right: 0;\n    }\n}\n");T.current.innerHTML=e}};m.useImperativeHandle(i,(function(){return{props:c,getElement:function(){return K.current}}})),r.useMountEffect((function(){!y&&h(o.UniqueComponentId())})),r.useUpdateEffect((function(){return y&&(K.current.setAttribute(y,""),oe()),function(){T.current=o.DomHandler.removeInlineStyle(T.current)}}),[y,c.breakpoint]),r.useUpdateEffect((function(){C(-1!==U?U:null)}),[U]),r.useUpdateEffect((function(){P.current&&(P.current=null)}));var ie=l({ref:K,id:c.id,className:o.classNames(c.className,_("root")),style:c.style},S.getOtherProps(c),F("root"));return m.createElement("div",ie,m.createElement(L,{hostName:"OrderList",value:V,selection:s,onReorder:function(e){c.onChange&&c.onChange({event:e.originalEvent,value:e.value}),P.current=e.direction},dataKey:c.dataKey,moveUpIcon:c.moveUpIcon,moveTopIcon:c.moveTopIcon,moveDownIcon:c.moveDownIcon,moveBottomIcon:c.moveBottomIcon,ptm:F,cx:_,unstyled:c.unstyled,metaData:A}),m.createElement(H,{ref:M,hostName:"OrderList",focused:O,ariaLabel:c.ariaLabel,ariaLabelledBy:c.ariaLabelledBy,value:V,selection:s,onItemClick:J,onOptionMouseDown:function(e){E(!0),B(e)},focusedOptionId:j,onListKeyDown:function(e){switch(e.code){case"ArrowDown":z(e);break;case"ArrowUp":W(e);break;case"Home":$(e);break;case"End":G(e);break;case"Enter":case"NumpadEnter":Q(e);break;case"Space":Z(e);break;case"KeyA":e.ctrlKey&&(d(V),e.preventDefault())}},onListFocus:function(e){var t=Y(),n=o.DomHandler.findSingle(t,'[data-p-highlight="true"]')||o.DomHandler.findSingle(t,'[data-pc-section="item"]'),r=t&&t.children?D(t.children):[];if(n&&r.length>0){var i=o.ObjectUtils.findIndexInList(n,r);E(!0),ne(-1!==U?U:n?i:-1),c.onFocus&&c.onFocus(e)}},onListBlur:function(e){E(!1),B(-1),c.onBlur&&c.onBlur(e)},onFilterInputChange:function(e){var t=e.target.value;g(t),c.onFilter&&c.onFilter({originalEvent:e,filter:t})},itemTemplate:c.itemTemplate,filter:c.filter,onFilter:function(e){var t=e.target.value;g(t),c.onFilter&&c.onFilter({originalEvent:e,value:t})},resetFilter:function(){g(""),c.onFilter&&c.onFilter({filter:""})},filterTemplate:c.filterTemplate,header:c.header,parentId:y,listStyle:c.listStyle,dataKey:c.dataKey,dragdrop:c.dragdrop,onChange:c.onChange,tabIndex:c.tabIndex,filterIcon:c.filterIcon,isUnstyled:q,ptm:F,cx:_}))})));K.displayName="OrderList",exports.OrderList=K;
