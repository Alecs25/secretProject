import*as t from"react";import{PrimeReactContext as e}from"primereact/api";import{ComponentBase as r,useHandleStyle as n}from"primereact/componentbase";import{useMergeProps as a,useUnmountEffect as u}from"primereact/hooks";import{classNames as o}from"primereact/utils";var i=r.extend({defaultProps:{__TYPE:"Chart",id:null,type:null,data:null,options:null,plugins:null,width:null,height:null,style:null,className:null,children:void 0},css:{classes:{root:function(t){return o("p-chart",t.props.className)}},inlineStyles:{root:function(t){var e=t.props;return Object.assign({width:e.width,height:e.height},e.style)}},styles:"\n        @layer primereact {\n            .p-chart {\n                position: relative\n            }\n        }\n        "}}),s=function(){try{return Chart}catch(t){return null}}(),l=t.memo(t.forwardRef((function(r,o){var l=a(),c=t.useContext(e),p=i.getProps(r,c),f=i.setMetaData({props:p}),m=f.ptm,h=f.cx,d=f.sx;n(i.css.styles,f.isUnstyled,{name:"chart"});var g=t.useRef(null),y=t.useRef(null),v=t.useRef(null),w=function(){C();var t={type:p.type,data:p.data,options:p.options,plugins:p.plugins};s?y.current=new s(v.current,t):import("chart.js/auto").then((function(e){C(),v.current&&e&&(y.current=e.default?new e.default(v.current,t):new e(v.current,t))}))},C=function(){y.current&&(y.current.destroy(),y.current=null)};t.useImperativeHandle(o,(function(){return{props:p,getCanvas:function(){return v.current},getChart:function(){return y.current},getBase64Image:function(){return y.current.toBase64Image()},getElement:function(){return g.current},generateLegend:function(){return y.current&&y.current.generateLegend()},refresh:function(){return y.current&&y.current.update()}}})),t.useEffect((function(){w()})),u((function(){C()}));var x=p.ariaLabel||p.options&&p.options.plugins&&p.options.plugins.title&&p.options.plugins.title.text,E=l({id:p.id,ref:g,style:d("root"),className:h("root")},i.getOtherProps(p),m("root")),b=l({ref:v,width:p.width,height:p.height,role:"img","aria-label":x},m("canvas"));return t.createElement("div",E,t.createElement("canvas",b))})),(function(t,e){return t.data===e.data&&t.options===e.options&&t.type===e.type}));l.displayName="Chart";export{l as Chart};
