import*as e from"react";import t,{PrimeReactContext as n,localeOption as r}from"primereact/api";import{ComponentBase as a,useHandleStyle as o}from"primereact/componentbase";import{usePrevious as i,useResizeListener as c,useMountEffect as l,useUpdateEffect as u}from"primereact/hooks";import{ChevronDownIcon as s}from"primereact/icons/chevrondown";import{ChevronLeftIcon as p}from"primereact/icons/chevronleft";import{ChevronRightIcon as m}from"primereact/icons/chevronright";import{ChevronUpIcon as f}from"primereact/icons/chevronup";import{Ripple as d}from"primereact/ripple";import{classNames as v,mergeProps as b,UniqueComponentId as h,DomHandler as g,ObjectUtils as y,IconUtils as x}from"primereact/utils";function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function I(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function S(e){var t=I(e,"string");return"symbol"===w(t)?t:String(t)}function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e){if(Array.isArray(e))return E(e)}function O(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function P(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}function j(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e){return C(e)||O(e)||P(e)||j()}function A(e){if(Array.isArray(e))return e}function D(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,c=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}function R(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T(e,t){return A(e)||D(e,t)||P(e,t)||R()}var B=a.extend({defaultProps:{__TYPE:"Carousel",id:null,value:null,page:0,header:null,footer:null,style:null,className:null,itemTemplate:null,circular:!1,showIndicators:!0,showNavigators:!0,autoplayInterval:0,numVisible:1,numScroll:1,prevIcon:null,nextIcon:null,responsiveOptions:null,orientation:"horizontal",verticalViewPortHeight:"300px",contentClassName:null,containerClassName:null,indicatorsContentClassName:null,onPageChange:null,children:void 0},css:{classes:{root:function(e){var t=e.isVertical;return v("p-carousel p-component",{"p-carousel-vertical":t,"p-carousel-horizontal":!t})},container:"p-carousel-container",content:"p-carousel-content",indicators:"p-carousel-indicators p-reset",header:"p-carousel-header",footer:"p-carousel-footer",itemsContainer:"p-carousel-items-container",itemsContent:"p-carousel-items-content",previousButton:function(e){return v("p-carousel-prev p-link",{"p-disabled":e.isDisabled})},previousButtonIcon:"p-carousel-prev-icon",nextButton:function(e){return v("p-carousel-next p-link",{"p-disabled":e.isDisabled})},nextButtonIcon:"p-carousel-next-icon",indicator:function(e){return v("p-carousel-indicator",{"p-highlight":e.isActive})},indicatorButton:"p-link",itemCloned:function(e){var t=e.itemProps;return v(t.className,"p-carousel-item",{"p-carousel-item-active":t.active,"p-carousel-item-start":t.start,"p-carousel-item-end":t.end})},item:function(e){var t=e.itemProps;return v(t.className,"p-carousel-item",{"p-carousel-item-active":t.active,"p-carousel-item-start":t.start,"p-carousel-item-end":t.end})}},styles:"\n@layer primereact {\n    .p-carousel {\n        display: flex;\n        flex-direction: column;\n    }\n    \n    .p-carousel-content {\n        display: flex;\n        flex-direction: column;\n        overflow: auto;\n    }\n    \n    .p-carousel-prev,\n    .p-carousel-next {\n        align-self: center;\n        flex-grow: 0;\n        flex-shrink: 0;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        overflow: hidden;\n        position: relative;\n    }\n    \n    .p-carousel-container {\n        display: flex;\n        flex-direction: row;\n    }\n    \n    .p-carousel-items-content {\n        overflow: hidden;\n        width: 100%;\n    }\n    \n    .p-carousel-items-container {\n        display: flex;\n        flex-direction: row;\n    }\n    \n    .p-carousel-indicators {\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        flex-wrap: wrap;\n    }\n    \n    .p-carousel-indicator > button {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    \n    /* Vertical */\n    .p-carousel-vertical .p-carousel-container {\n        flex-direction: column;\n    }\n    \n    .p-carousel-vertical .p-carousel-items-container {\n        flex-direction: column;\n        height: 100%;\n    }\n    \n    /* Keyboard Support */\n    .p-items-hidden .p-carousel-item {\n        visibility: hidden;\n    }\n    \n    .p-items-hidden .p-carousel-item.p-carousel-item-active {\n        visibility: visible;\n    }\n}\n",inlineStyles:{itemsContent:function(e){return{height:e.height}}}}});function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){var r,a,o;r=e,o=n[t],(a=S(a=t))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=e.memo((function(t){var n=t.ptm,r=t.cx,a=t.className&&"p-carousel-item-cloned"===t.className?"itemCloned":"item",o=t.template(t.item),i=b({className:r(a,{itemProps:t}),role:t.role,"aria-roledescription":t.ariaRoledescription,"aria-label":t.ariaLabel,"aria-hidden":t.ariaHidden,"data-p-carousel-item-active":t.active,"data-p-carousel-item-start":t.start,"data-p-carousel-item-end":t.end},n(a));return e.createElement("div",i,o)})),L=e.memo(e.forwardRef((function(a,w){var I=e.useContext(n),S=B.getProps(a,I),E=T(e.useState(S.numVisible),2),C=E[0],O=E[1],P=T(e.useState(S.numScroll),2),j=P[0],A=P[1],D=T(e.useState(S.page*S.numScroll*-1),2),R=D[0],V=D[1],L=T(e.useState(S.page),2),X=L[0],_=L[1],U=B.setMetaData({props:S,state:{numVisible:C,numScroll:j,totalShiftedItems:R,page:X}}),Y=U.ptm,z=U.cx,J=U.sx,K=U.isUnstyled;o(B.css.styles,K,{name:"carousel"});var F=e.useRef(null),W=e.useRef(null),$=e.useRef(0),q=e.useRef(!!S.autoplayInterval),G=e.useRef(""),Q=e.useRef(20),Z=e.useRef(null),ee=e.useRef(null),te=e.useRef(null),ne=e.useRef(null),re=e.useRef(!1),ae=e.useRef(null),oe=i(j),ie=i(C),ce=i(S.value),le=i(S.page),ue="vertical"===S.orientation,se=S.circular||!!S.autoplayInterval,pe=se&&S.value&&S.value.length>=C,me=S.value?Math.max(Math.ceil((S.value.length-C)/j)+1,0):0,fe=me&&S.autoplayInterval&&q.current,de=S.onPageChange&&!fe,ve=de?S.page:X,be=T(c({listener:function(){ge()},when:S.responsiveOptions}),1)[0],he=function(e,t){var n=R;null!=t?(n=j*t*-1,pe&&(n-=C),re.current=!1):(n+=j*e,re.current&&(n+=$.current-j*e,re.current=!1),t=Math.abs(Math.floor((pe?n+C:n)/j)));pe&&X===me-1&&-1===e?(n=-1*(S.value.length+C),t=0):pe&&0===X&&1===e?(n=0,t=me-1):t===me-1&&$.current>0&&(n+=-1*$.current-j*e,re.current=!0),W.current&&(!K()&&g.removeClass(W.current,"p-items-hidden"),He(n),W.current.style.transition="transform 500ms ease 0s"),Le(t),V(n)},ge=function(){if(W.current&&ae.current){for(var e=window.innerWidth,t={numVisible:S.numVisible,numScroll:S.numScroll},n=0;n<ae.current.length;n++){var r=ae.current[n];parseInt(r.breakpoint,10)>=e&&(t=r)}if(j!==t.numScroll){var a=Math.floor(ve*j/t.numScroll),o=t.numScroll*a*-1;pe&&(o-=t.numVisible),V(o),A(t.numScroll),Le(a)}C!==t.numVisible&&O(t.numVisible)}},ye=function(e,t){(se||0!==ve)&&he(1,t),q.current=!1,e.cancelable&&e.preventDefault()},xe=function(e,t){(se||ve<me-1)&&he(-1,t),q.current=!1,e.cancelable&&e.preventDefault()},we=function(e,t){t>ve?xe(e,t):t<ve&&ye(e,t)},Ie=function(e){W.current&&"transform"===e.propertyName&&(g.addClass(W.current,"p-items-hidden"),W.current.style.transition="",0!==X&&X!==me-1||!pe||He(R))},Se=function(e){var t=e.changedTouches[0];Z.current={x:t.pageX,y:t.pageY}},Ne=function(e){e.cancelable&&e.preventDefault()},Ee=function(e){var t=e.changedTouches[0];Ce(e,ue?t.pageY-Z.current.y:t.pageX-Z.current.x)},Ce=function(e,t){Math.abs(t)>Q.current&&(t<0?xe(e):ye(e))},Oe=function(e){switch(e.code){case"ArrowRight":Pe();break;case"ArrowLeft":je();break;case"Home":ke(),e.preventDefault();break;case"End":Ae(),e.preventDefault();break;case"ArrowUp":case"ArrowDown":e.preventDefault();break;case"Tab":De()}},Pe=function(){var e=k(g.find(ne.current,'[data-pc-section="indicator"]')),t=Re();Te(t,t+1===e.length?e.length-1:t+1)},je=function(){var e=Re();Te(e,e-1<=0?0:e-1)},ke=function(){var e=Re();Te(e,0)},Ae=function(){var e=k(g.find(ne.current,'[data-pc-section="indicator"]r')),t=Re();Te(t,e.length-1)},De=function(){var e=k(g.find(ne.current,'[data-pc-section="indicator"]')),t=e.findIndex((function(e){return!0===g.getAttribute(e,"data-p-highlight")})),n=g.findSingle(ne.current,'[data-pc-section="indicator"] > button[tabindex="0"]'),r=e.findIndex((function(e){return e===n.parentElement}));e[r].children[0].tabIndex="-1",e[t].children[0].tabIndex="0"},Re=function(){var e=k(g.find(ne.current,'[data-pc-section="indicator"]')),t=g.findSingle(ne.current,'[data-pc-section="indicator"] > button[tabindex="0"]');return e.findIndex((function(e){return e===t.parentElement}))},Te=function(e,t){var n=k(g.find(ne.current,'[data-pc-section="indicator"]'));n[e].children[0].tabIndex="-1",n[t].children[0].tabIndex="0",n[t].children[0].focus()},Be=function(){S.autoplayInterval>0&&(ee.current=setInterval((function(){he(-1,X===me-1?0:X+1)}),S.autoplayInterval))},Ve=function(){ee.current&&clearInterval(ee.current)},Me=function(){te.current||(te.current=g.createInlineStyle(I&&I.nonce||t.nonce,I&&I.styleContainer));var e="\n            .p-carousel[".concat(G.current,"] .p-carousel-item {\n                flex: 1 0 ").concat(100/C,"%\n            }\n        ");if(S.responsiveOptions){var n=y.localeComparator(I&&I.locale||t.locale);ae.current=k(S.responsiveOptions),ae.current.sort((function(e,r){return y.sort(e.breakpoint,r.breakpoint,-1,n,I&&I.nullSortOrder||t.nullSortOrder)}));for(var r=0;r<ae.current.length;r++){var a=ae.current[r];e+="\n                    @media screen and (max-width: ".concat(a.breakpoint,") {\n                        .p-carousel[").concat(G.current,"] .p-carousel-item {\n                            flex: 1 0 ").concat(100/a.numVisible,"%\n                        }\n                    }\n                ")}ge()}te.current.innerHTML=e},He=function(e){W.current&&(W.current.style.transform=ue?"translate3d(0, ".concat(e*(100/C),"%, 0)"):"translate3d(".concat(e*(100/C),"%, 0, 0)"))},Le=function(e){!de&&_(e),S.onPageChange&&S.onPageChange({page:e})};e.useImperativeHandle(w,(function(){return{props:S,startAutoplay:Be,stopAutoplay:Ve,getElement:function(){return F.current}}})),l((function(){F.current&&(G.current=h(),F.current.setAttribute(G.current,"")),te.current||(ge(),He(R),be())})),u((function(){var e=!1,t=R;if(Me(),S.autoplayInterval&&Ve(),oe!==j||ie!==C||S.value&&ce&&ce.length!==S.value.length){$.current=(S.value.length-C)%j;var n=ve;0!==me&&n>=me&&(Le(n=me-1),e=!0),t=n*j*-1,pe&&(t-=C),n===me-1&&$.current>0?(t+=-1*$.current+j,re.current=!0):re.current=!1,t!==R&&(V(t),e=!0),He(t)}return pe&&(0===X?t=-1*C:0===t&&(t=-1*S.value.length,$.current>0&&(re.current=!0)),t!==R&&(V(t),e=!0)),le!==S.page&&(S.page>le&&S.page<=me-1?he(-1,S.page):S.page<le&&he(1,S.page)),!e&&fe&&Be(),function(){S.autoplayInterval&&Ve(),te.current=g.removeInlineStyle(te.current)}}));var Xe,_e,Ue,Ye,ze,Je,Ke,Fe=function(){if(S.value&&S.value.length){var t=null,n=null;if(pe){var a=null;t=(a=S.value.slice(-1*C)).map((function(t,n){return e.createElement(H,{key:n+"_scloned",className:"p-carousel-item-cloned",template:S.itemTemplate,item:t,active:-1*R===S.value.length+C,start:0===n,end:n===a.length-1,ptm:Y,cx:z})})),n=(a=S.value.slice(0,C)).map((function(t,n){return e.createElement(H,{key:n+"_fcloned",className:"p-carousel-item-cloned",template:S.itemTemplate,item:t,active:0===R,start:0===n,end:n===a.length-1,ptm:Y,cx:z})}))}var o=S.value.map((function(t,n){var a,o=pe?-1*(R+C):-1*R,i=o+C-1,c=o<=n&&i>=n,l=o===n,u=i===n,s=o>n||i<n||void 0,p=(a=n,r("aria")?r("aria").slideNumber.replace(/{slideNumber}/g,a):void 0),m=r("aria")?r("aria").slide:void 0;return e.createElement(H,{key:n,template:S.itemTemplate,item:t,active:c,start:l,ariaHidden:s,ariaLabel:p,ariaRoledescription:m,role:"group",end:u,ptm:Y,cx:z})}));return e.createElement(e.Fragment,null,t,o,n)}},We=function(){if(S.showNavigators){var t=(!se||S.value&&S.value.length<C)&&0===ve,n=b({className:z("previousButtonIcon")},Y("previousButtonIcon")),a=x.getJSXIcon(ue?S.prevIcon||e.createElement(f,n):S.prevIcon||e.createElement(p,n),M({},n),{props:S}),o=b({type:"button",className:z("previousButton",{isDisabled:t}),onClick:function(e){return ye(e)},disabled:t,"aria-label":r("aria")?r("aria").previousPageLabel:void 0,"data-pc-group-section":"navigator"},Y("previousButton"));return e.createElement("button",o,a,e.createElement(d,null))}return null},$e=function(){if(S.showNavigators){var t=(!se||S.value&&S.value.length<C)&&(ve===me-1||0===me),n=b({className:z("nextButtonIcon")},Y("nextButtonIcon")),a=x.getJSXIcon(ue?S.nextIcon||e.createElement(s,n):S.nextIcon||e.createElement(m,n),M({},n),{props:S}),o=b({type:"button",className:z("nextButton",{isDisabled:t}),onClick:function(e){return xe(e)},disabled:t,"aria-label":r("aria")?r("aria").nextPageLabel:void 0,"data-pc-group-section":"navigator"},Y("nextButton"));return e.createElement("button",o,a,e.createElement(d,null))}return null},qe=function(t){var n,a=ve===t,o=function(e){return Y(e,{context:{active:a}})},i=b({key:"carousel-indicator-"+t,className:z("indicator",{isActive:a}),"data-p-highlight":a},o("indicator")),c=b({type:"button",className:z("indicatorButton"),tabIndex:ve===t?"0":"-1",onClick:function(e){return we(e,t)},"aria-label":(n=t+1,r("aria")?r("aria").pageLabel.replace(/{page}/g,n):void 0),"aria-current":ve===t?"page":void 0},o("indicatorButton"));return e.createElement("li",i,e.createElement("button",c,e.createElement(d,null)))},Ge=(Xe=Fe(),_e=ue?S.verticalViewPortHeight:"auto",Ue=We(),Ye=$e(),ze=b({className:z("itemsContent"),style:J("itemsContent",{height:_e}),onTouchStart:function(e){return Se(e)},onTouchMove:function(e){return Ne(e)},onTouchEnd:function(e){return Ee(e)}},Y("itemsContent")),Je=b({className:v(S.containerClassName,z("container")),"aria-live":q.current?"polite":"off"},Y("container")),Ke=b({className:z("itemsContainer"),onTransitionEnd:Ie},Y("itemsContainer")),e.createElement("div",Je,Ue,e.createElement("div",ze,e.createElement("div",N({ref:W},Ke),Xe)),Ye)),Qe=function(){if(S.showIndicators){for(var t=[],n=0;n<me;n++)t.push(qe(n));var r=b({ref:ne,className:v(S.indicatorsContentClassName,z("indicators")),onKeyDown:Oe},Y("indicators"));return e.createElement("ul",r,t)}return null}(),Ze=function(){if(S.header){var t=b({className:z("header")},Y("header"));return e.createElement("div",t,S.header)}return null}(),et=function(){if(S.footer){var t=b({className:z("footer")},Y("footer"));return e.createElement("div",t,S.footer)}return null}(),tt=b({id:S.id,ref:F,className:v(S.className,z("root",{isVertical:ue})),style:S.style,role:"region"},B.getOtherProps(S),Y("root")),nt=b({className:v(S.contentClassName,z("content"))},Y("content"));return e.createElement("div",tt,Ze,e.createElement("div",nt,Ge,Qe),et)})));H.displayName="CarouselItem",L.displayName="Carousel";export{L as Carousel};
